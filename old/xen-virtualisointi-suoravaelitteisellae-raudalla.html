<html><head><meta content="text/html; charset=utf-8" http-equiv="content-type" /><script type="text/x-mathjax-config">/* Fix org-generated pictures to MathJX. Big thanks to Davide Cervone
  on StackOverflow with this. http://stackoverflow.com/a/14631703/308668
  */
MathJax.Extension.myImg2jax = {
    version: "1.0",
    PreProcess: function (element) {
        var images = element.getElementsByTagName("img");
        for (var i = images.length - 1; i >= 0; i--) {
            var img = images[i];
            if (img.className === "dvipng") {
                var script = document.createElement("script");
                script.type = "math/tex";
                var match = img.alt.match(/^(\$\$?)(.*)\1/);
                if (match[1] === "$$") {script.type += ";mode=display"}
                MathJax.HTML.setScript(script,match[2]);
                img.parentNode.replaceChild(script,img);
            }
        }
    }
};
MathJax.Hub.Register.PreProcessor(["PreProcess",MathJax.Extension.myImg2jax]);
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script><link href="http://fwwm.us/css/main.css" rel="stylesheet" type="text/css" /><title>Xen-virtualisointi suoravälitteisellä raudalla - Life at the Room.</title><link href="http://fwwm.us/css/miete.css" rel="stylesheet" type="text/css" /></head><body><div id="sidebar-left"><div id="post-info"><div id="navi"><span class="title">Navigointi</span><ul id="navi-list"><li class="fp"><a href="http://fwwm.us/">Etusivulle</a></li><li><a href="http://fwwm.us/miete/index.html">Mietteet</a></li><li><a href="..">heinäkuu</a></li><li><a href="../..">2013</a></li></ul></div><span class="title">Info</span><p class="date">Julkaistu<br />11.07.2013 16:14</p></div><div id="post-tags"><span class="title">Tagit</span><ul id="tags-list"><li><div class="taggy"><div class="taggy-inner"><a href="http://fwwm.us/tag/rauta/index.html">rauta</a></div></div></li><li><div class="taggy"><div class="taggy-inner"><a href="http://fwwm.us/tag/pelailu/index.html">pelailu</a></div></div></li></ul></div></div><div id="content"><div class="post-content">
<h1>Xen-virtualisointi suoravälitteisellä raudalla    </h1>
<div id="text-2-21" class="outline-text-3">




<p>
   Jostain se vain tuli mieleeni, ja ajattelin irkissä ääneen:
   "Olisipa se hienoa, jos jonain päivänä virtualisointisovellukset
   osaisivat antaa vieraskoneelle suorat yhteydet isäntäkoneen
   rautaan, niin pääsisi pelaamaan sammuttamatta linux-isäntää". Ja
   yhtä nopeasti tuli vastaus: "se on mahdollista; hyvin, hyvin
   mahdollista."
</p>
<p>
   Xen ja PCI-passthrough on taikasanasto, jolla tämä tavoiteltu tila
   saavutetaan. <a href="http://www.youtube.com/watch?v=L_g7ZBMWoLk">Youtubessa</a> on hyvin vakuuttavia esitelmiä aiheesta.
   Valitettavasti myös raudalta vaaditaan joitain vähemmän tuettuja
   kikkoja; Intel on esimerkiksi hyvin ilkeästi jättänyt
   markkinapoliittisista syistä tarvittavan <i>VT-d</i> -tuen pois
   tehokäyttäjille myytävistä prosessoreista. VT-d -tuki siis maksaa
   oleellisesti helpon kellotettavuuden, mutta eihän se loppupeleissä
   iso menetys ole. Myös emolevyltä vaaditaan jotain, joten molemmat
   uusista komponenteistani menevät Xen-päivityksien myötä vaihtoon.
   Ei tapahdu tosin aivan heti: kesää ja työtä on jäljellä vain reilun
   kuukauden ajan, joten tässä pisteessä on turha enää innostua. Nämä
   ideat ajattelin haudutella ja ottaa vuoden päästä kesällä käyttöön,
   jahka gradu on valmistumaan päin. Tai jotain.
</p>
<p>
   Tämä Xen-vaihtoehto oikein toimiessaan takaisi kaiken halutun
   Windows/Linux -toiminnallisuuden, josta olen haaveillut aina
   pelaillessani enemmän. Dualboottaus on työlästä ja nostaa kynnystä
   niin paljon, että sitä ei tulisi harrastettua kovin usein. Wine on
   wine: toimii silloin kun toimii. Vaikka tulokset ovat hyviä
   esimerkiksi Civilization V:n ja Falloutin kanssa, en halua käyttää
   viihteeseen tarkoitettuja tunteja epävakaaseen pelattavuuteen tai
   puutteelliseen kokemukseen. Kaikenlainen häslääminen Steamien ja
   wineprefixien kanssa jää pois, kun alla on oikea Windows.
</p>
<p>
   Suurin kysymys taitaakin olla: onko Xen-vieraana toimiva Windows
   sitten oikeasti vakaa ja luotettava peli? Voin ottaa pienet hitit
   tehokkuudessa, jos vakaus ja yhtenäinen pelikokemus säilyy. Entä
   isäntäkäyttis? Ottaako Gentoonikin Xenin myötä teho-osuman
   silloinkin, kun vieraat ovat nukkumassa?
</p>
<p>
   Edelleen kaunein ajatus olisi hankkia dedikoitu pelitietokone,
   mutta mikä kamala rahanhukka sekin on. Koska haluan myös
   linux-käyttöni sujuvan sulavasti. Puhumattakaan ylläpidon määrästä
   ja niin poispäin. Olin vanhassa blogissani pohtinut sitä ajatusta
   dualbootista ja erillisestä työpalvelimesta, mutta se ei koskaan
   ottanut tuulta alleen. Se karsiutui erityisesti huonohkoon koppaan,
   jonka onnistuin ostamaan. Voisin päästä tässä kaikessa voitolle
   monella tavalla, ja kenties "fiksuin" tapa olisi jättää Xen omaan
   arvoonsa: Xen voi tarjota 99-prosenttisen Windows-kokemuksen
   virtualisoituna, mutta voinko ikinä pelin tiltatessa luottaa
   siihen, että Xen ei aiheuttanut kaatumista.
</p>
<p>   
   Sanotaanko näin, että jos saan siirrettyä tietokoneeni
   keskusyksikön vaatekaappiin hurisemaan, niin potentiaali
   kunnollisen palvelimen hankkimiselle kasvaa sitten rajusti.
   Lähiverkkoisen SSH:n yli tehtävällä X-hurjastelulla saa aika paljon
   aikaan pysyvyyden ja sen sellaisen kanssa. Luultavasti hyötyisin
   näin eniten. Toisaalta Xen toisi kaiken niin hyvässä paketissa, jos
   vain uskoo tuon PCI-läpiviennin toimivuuteen. Ja pitäisihän siihen
   hittolainen uskoa. Xen on iso nimi virtuaalimarkkinoilla ja tuo
   PCI-läpivientikin on vuosia vanha tekniikka.
</p>

</div>

<div class="outline-4" id="outline-container-2-21-1">
<h2>Uusia mietteitä hautomosta (kaksi päivää myöhemmin)</h2>
<div id="text-2-21-1" class="outline-text-4">


<p>
    Ensimmäiset ajatukset Xenistä tietysti liikkuivat siellä "liian
    hyvää ollakseen totta" -linjalla. Dualbootissa on silti se mahtava
    määrä ongelmia ja sitä rataa. Jos noihin youtubettajiin on mitään
    luottoa, niin Xen on riittävän vakaa, kunhan raudan valitsee
    oikein.
</p>
<p>
    Xenissä on sekin hyvä puoli, että voi hyvillä mielillä panna vähän
    potkua rautaan. Isompi koppa ja tilaa työskennellä. Uudet 3770-
    tai 4770-prosessorit tulille ja ehkä näyttikseksikin jotain
    komeata. Työstä riippuen jopa Extreme-mallit [käytettynä] voisivat
    olla listalla. Viimeisen päälle kovantasoinen Xen-setti koostuisi
    kahdesta näytönohjaimesta, jolloin minulla voisi olla
    samanaikaisesti linuxia ja windowsia ruuduilla. Ei mahdotonta, kun
    monissa näytöissä on hyvät lähdevalitsimet.
</p>
<p>
    Mutta nämä asiat jäävät toistaiseksi vain hautomoasteelle. Ennen
    kuin tulee kunnollisia töitä ilmoille, jään vain hiljalleen
    vahtimaan hyviä diilejä 3770-prosessoreista ja vastaavista.
</p></div>
</div>

</div><div id="disqus_thread"></div>

<script type="text/javascript">
    // :sb__ stuff is replaced in clojure
    var disqus_shortname = 'progim';
    var disqus_identifier = '20130711_1614';

    (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] ||
         document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<noscript>Please enable JavaScript to view the <a
href="http://disqus.com/?ref_noscript">comments powered by
Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by
<span class="logo-disqus">Disqus</span></a>
</div></body></html>