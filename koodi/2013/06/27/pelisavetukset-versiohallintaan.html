<html><head><meta content="text/html; charset=utf-8" http-equiv="content-type" /><script type="text/x-mathjax-config">/* Fix org-generated pictures to MathJX. Big thanks to Davide Cervone
  on StackOverflow with this. http://stackoverflow.com/a/14631703/308668
  */
MathJax.Extension.myImg2jax = {
    version: "1.0",
    PreProcess: function (element) {
        var images = element.getElementsByTagName("img");
        for (var i = images.length - 1; i >= 0; i--) {
            var img = images[i];
            if (img.className === "dvipng") {
                var script = document.createElement("script");
                script.type = "math/tex";
                var match = img.alt.match(/^(\$\$?)(.*)\1/);
                if (match[1] === "$$") {script.type += ";mode=display"}
                MathJax.HTML.setScript(script,match[2]);
                img.parentNode.replaceChild(script,img);
            }
        }
    }
};
MathJax.Hub.Register.PreProcessor(["PreProcess",MathJax.Extension.myImg2jax]);
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script><link href="http://fwwm.us/css/main.css" rel="stylesheet" type="text/css" /><title>Pelisavetukset versiohallintaan - Life at the Room.</title><link href="http://fwwm.us/css/koodi.css" rel="stylesheet" type="text/css" /></head><body><div id="sidebar-left"><div id="post-info"><div id="navi"><span class="title">Navigointi</span><ul id="navi-list"><li class="fp"><a href="http://fwwm.us/">Etusivulle</a></li><li><a href="http://fwwm.us/koodi/index.html">Koodi</a></li><li><a href="..">kesäkuu</a></li><li><a href="../..">2013</a></li></ul></div><span class="title">Info</span><p class="date">Julkaistu<br />27.06.2013 19:57</p></div><div id="post-tags"><span class="title">Tagit</span><ul id="tags-list"><li><div class="taggy"><div class="taggy-inner"><a href="http://fwwm.us/tag/pelit/index.html">pelit</a></div></div></li><li><div class="taggy"><div class="taggy-inner"><a href="http://fwwm.us/tag/bash/index.html">bash</a></div></div></li><li><div class="taggy"><div class="taggy-inner"><a href="http://fwwm.us/tag/fallout/index.html">fallout</a></div></div></li></ul></div></div><div id="content"><div class="post-content">
<h1>Pelisavetukset versiohallintaan    </h1>
<div id="text-3-1" class="outline-text-3">




<p>
   Huolehditko joskus epävakaiden pelien savetuksista? Erityisesti kun
   savetuksien kanssa voi käydä monenlaista. Joskus vain jää
   tallentamatta, joskus pelissä esiintyvä bugi pakottaa pelaajan
   palaamaan reittejään takaisin. Entä jos sekään ei onnistu, ja
   tallennusta on vain yhtä sorttia? Entä jos peli suoralta kädeltä
   korruptoi tallennukset hassuissa tilanteissa (Civ 5, Test Drive:
   Unlimited)?
</p>
<p>
   Pannaan tietokone asialle: meillä on versiohallintoja, <code>git</code>, ja
   meillä on työkaluja automatisoida versiointi aina tallennuksen
   yhteydessä: <code>inotify</code>.
</p>
<p>
   Inotify on kuuluisasti kernelin erikoisuus, joten käyttääksemme
   sitä tyydyttävästi komentoriviltä tarvitsemme parit työkalut.
   <a href="https://github.com/rvoicilas/inotify-tools/wiki">Inotify-tools</a> on se, mitä tarvitsemme. Vaatimukset pikku
   demonillemme ovat:
</p>
<ul>
<li>pyörii aina taustalla
</li>
<li>ei pollaa tiedostoja, vaan käyttää jotain mainittua
     inotify-rajapintaa
</li>
<li>kun muutoksia pelihakemistossa tapahtuu, ajetaan vakiorivi
     shellissä
</li>
</ul>


<p>     
   Inotify ja inotify-tools hoitavat homman kotiin!
</p>
<p>
   Oleellinen koodinpala lienee tämä näin:
</p>






<p>
   Gitin me konfiguroimme siten, että se tekee "vakiocommitin"
   päivämääräleimalla. Committia ei joka tapauksessa synny, jos mikään
   ei hakemistossa muutu.
</p>
<p>
   Delta-pakkauksen ansiosta levyä ei pala tarpeettomasti, vaikka
   kommitteja tuleekin rajusti. Vaikka git onkin nopea, savetusten
   lukumäärä kannattanee pitää vähäisenä. Falloutin tekemät autosavet
   ja omat pikatallennukseni ulkoselailuissa riittävät omiin
   tarkoituksiini kohtuullisen hyvin. Steamin ja muun datan
   perusteella levytilaa palaa noin 20-30 megaa per pelattu tunti.
   Repositorion voi aina resetoida, jos tuntuu menevän liikaa.
</p>
<p>
   Nyt voinen pelailla levollisemmin, kun tiedän, että savet saa aina
   ulos hyvinkin suurella tarkkuudella aina kun syntyy vakava jumi.
</p>
</div>

</div><div id="disqus_thread"></div>

<script type="text/javascript">
    // :sb__ stuff is replaced in clojure
    var disqus_shortname = 'progim';
    var disqus_identifier = '20130627_1957';

    (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] ||
         document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<noscript>Please enable JavaScript to view the <a
href="http://disqus.com/?ref_noscript">comments powered by
Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by
<span class="logo-disqus">Disqus</span></a>
</div></body></html>