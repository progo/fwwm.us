<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <link href="/templates/main.css" media="screen" type="text/css" rel="stylesheet" />
  
  <title>Python on huonompi kieli kuin Clojure — fwwm.us</title>
  <link />
</head>
  <body>
    <div id="backgrounds">
      <div id="header">
        <h1 id="site-title">fwwm.us</h1>
      </div>
      <div id="sidebar">
  <ul id="navigation" class="navi-list">
    <li><a href="/">Ylös</a></li>
    <li><a href="/all.html">Kaikki jutut</a></li>
    <!-- <li><a href=".">RSS</a></li> -->
  </ul>
  <ul class="info-list">
    <li>
      <div>
        <span class="value" id="post-created">18.05.2013</span>
        <span class="key">Luotu</span>
      </div>
    </li>
    <li>
      <div>
        <span class="value" id="post-modified">16.05.2016</span>
        <span class="key">Päivitetty</span>
      </div>
    </li>
    <li>
      <a href="https://github.com/progo/fwwmus---org/commits/main/miete/python-vs-clojure.org" id="post-revs-url">
        <span>Muutoshistoria</span>
      </a>
    </li>
  </ul>

  <h2>Tagit</h2>
  <ul id="tags" class="tag-list"><li class="tag-2"><a href="/tags/koodi.html" class="tag-name">koodi</a></li><li class="tag-2"><a href="/tags/python.html" class="tag-name">python</a></li><li class="tag-2"><a href="/tags/clojure.html" class="tag-name">clojure</a></li></ul>

  <h2 id="related-posts-title">Aiheen vierestä</h2>
  <ul id="related-posts">
    <li>
      <a href="/miete/pythonin-tehokkuus-komentorivilla.html" class="rp-url">
        <span class="rp-title">Pythonin käsittämätön tehokkuus komentorivisovelluksissa</span>
      </a>
    </li><li>
      <a href="/miete/korkokertymae.html" class="rp-url">
        <span class="rp-title">Korkokertymiä</span>
      </a>
    </li><li>
      <a href="/miete/canto.html" class="rp-url">
        <span class="rp-title">Canto on uusi RSS-lukijani</span>
      </a>
    </li><li>
      <a href="/miete/lisp-kirjat.html" class="rp-url">
        <span class="rp-title">Lisp-kirjoja</span>
      </a>
    </li><li>
      <a href="/miete/java-js-pelialustana.html" class="rp-url">
        <span class="rp-title">Java + JavaScript, paras pelialusta?</span>
      </a>
    </li>
  </ul>
</div>
      <div id="main">
  <div id="content">
<h1 class="title">Python on huonompi kieli kuin Clojure</h1>
<div class="outline-2" id="outline-container-sec-1">

<div id="text-1" class="outline-text-2">

<p>
Pakko hieman avautua Pythonin puutteista ja miksi Clojure sitten
voittaa kädenväännössä lopulta. Nämä asiat ovat osittain
objektiivisia totuuksia, mutta lopputulema on luonnollisesti
subjektiivinen, oma näkemykseni näiden faktojen kasaantumisesta.
</p>
</div>

<div class="outline-3" id="outline-container-sec-1-1">
<h3 id="sec-1-1">Pythonin dokumentaatio on sekavaa</h3>
<div id="text-1-1" class="outline-text-3">
<p>
Guido ja Python-yhteisö painottaa kovasti hyvää dokumentaatiota,
ja yhteisö onkin kehitellyt hyviä työkaluja ja käytäntöjä hyvän
dokumentaation tuottamiseksi.
</p>

<p>
Mutta loppupeleissä Pythonin omien kirjastojen dokumentit ovat
aikamoisessa sotkussa. Mistä löytyy se kattava referenssi uuden
<code>format</code>-metodin muotoilukoodeista? Googlellakin saa hakea
useasta paikasta, ennen kuin tärppää.
</p>

<p>
Sittenkin dokumentaation löydyttyä niissä ei ole yleensä
tarpeeksi esimerkkejä, eikä funktioiden standarditoteutuksiin
löydy suoria linkkejä, vaikka syytä olisi.
</p>

<p>
<a href="http://joepie91.wordpress.com/2013/02/19/the-python-documentation-is-bad-and-you-should-feel-bad/">Tämä joepie91:n</a> kirjoittama rantti avasi silmäni lopullisesti
asialle: Python on dokumentaationsa tasolla substandardi. Olen
myös valmis allekirjoittamaan joepien muut pointit Python-yhteisön
ominaisuuksista. PHP ja Clojure menevät heittämällä ohi parempien
dokkariensa kanssa, vaikka ehkä vertailu Clojuren kanssa on
epäreilua: Clojuren "viralliset" dokkarit ovat kehnot, mutta
google toisaalta osaa tarjoilla uusia <a href="http://clojuredocs.org/">ClojureDocs</a>-tuloksia
ensimmäisinä tuloksina.
</p>
</div>
</div>
<div class="outline-3" id="outline-container-sec-1-2">
<h3 id="sec-1-2">Python on hidasta</h3>
<div id="text-1-2" class="outline-text-3">
<p>
Python käynnistyy nopeasti, mutta siihen se nopeus jääkin.
Tavukoodia suorittava moottori ei ole erityisesti tunnettu
hyvästä just in time -optimoinnista.
</p>

<p>
Toinen puutteellinen seikka on Pythonin virtuaalikoneen
säieongelma: säikeet pyörivät vain yhden instanssin alla, joka
rajoittaa säikeiden etuja tietyissä sovelluksissa kovasti.
Prosesseihinjakaminen on onneksi olemassa, joten tilanne ei ole
kokonaan hukassa. Säiepyörittely ja jaettu muisti on kuitenkin
tehokkaampaa ja joskus helpompaa kuin erillisprosessien käyttämät
viestinvälitysmekanismit.
</p>

<p>
Clojure JVM-kielenä tykittää dynaamisten kielien benchmarkeissa
aika korkealla. JPython saattaisi olla ratkaisu näihin
mainittuihin ongelmiin, kun saataisiin JVM:n kypsynyt
JIT-optimointi ja ehkäpä säikeetkin saavat rellestää vapaammin.
</p>
</div>
</div>
<div class="outline-3" id="outline-container-sec-1-3">
<h3 id="sec-1-3">'Batteries included', or not.</h3>
<div id="text-1-3" class="outline-text-3">
<p>
Pythonin suuri hehkutettu etu on ollut kielen hyvä tuki
kaikenlaiselle hyvälle.
</p>

<p>
Ensimmäinen totuus on se, että JVM:llä on isompi valmiskirjasto.
Clojure perii tämän kaiken.
</p>

<p>
Ja entäs jos jotain Pythonin valmiskirjastoista puuttuu? Toki,
ongelman kuin ongelman voi suurella todennäköisyydellä ratkaista
tehokkaasti ja elegantisti Python-kirjastojen työkaluilla. Sitä en
epäile. Mutta teoreettisen koulutuksen käyneenä minulla saattaa
olla hyvä ja elegantti ratkaisumalli jo päässäni, ja silloin olisi
luultavasti kaikkien etu, jos pääsen käyttämään sitä. Näin kävi,
kun halusin tarkastella järjestettyjen puiden käyttöä
ongelmassani. Javassa ja Clojuressa on TreeMap näitä varten;
Pythonissa pitää koodata oma punamustapuu ja toivoa, että se edes
etäisesti vastaisi CPython-alkuperäisien tietorakenteiden
tehokkuutta. Eli Pythonin valmiskirjasto ei ole niin suuri kuin
Javalla.
</p>

<p>
Muutenkin Pythonin käyttämien tietorakenteiden ominaisuudet
tuntuvat kelluvan hieman implementaation varassa: voinko luottaa
listojen aikavaativuuksiin eri implementaatioiden välillä?
</p>
</div>
</div>
<div class="outline-3" id="outline-container-sec-1-4">
<h3 id="sec-1-4">Python 2:n unicode-sotkut</h3>
<div id="text-1-4" class="outline-text-3">
<p>
Python 2 sisältää aivan tolkuttoman surkean unicode-tuen. Javassa
asia on tehty oikein. Python 3 lopulta korjaa kaikki ongelmat
fiksulla tavalla, mutta <i>kuka sitä pääsee käyttämään</i> – kaikki
helvetin hyvät kirjastot toimivat vain kakkosessa.
</p>
</div>
</div>
<div class="outline-3" id="outline-container-sec-1-5">
<h3 id="sec-1-5">Pythonin moduulisysteemi on vaarallinen</h3>
<div id="text-1-5" class="outline-text-3">
<p>
Kaikki modernit dynaamiset kielet sisältävät hienot
"pakettihallinnat", joilla puuttuvat moduulit saadaan asennettua
kuntoon kertaheitolla ja riippuvuudet huomioiden. Ihan kiva,
Rubyllä on <code>gem</code> ja Pythonilla <code>pip</code> ja <code>easy_install</code>, mutta
ovatko ne turvallisia? Näillä systeemeillä pääsee helposti
asentamaan distron oman pakettihallinnan ohi tavaraa globaalin
polun alle.
</p>

<p>
Javassa saattaa olla kamalan verboosinen työkalusetti moduuleihin
ja paketteihin, mutta se on myös aiheuttanut minulle vähiten
päänsärkyä kaikista. Clojuren tapauksessa pakettiriippuvuudet ovat
projektilokaaleja, ja ne hallinnoidaan Javassa tuttujen, hyvin
kypsyneiden työkalujen avulla kuntoon. Kokonaisuutta voidaan
sitten tarjoilla yhtenä isona jar-tiedostona, jonka
suorittamiseen ei tarvitakaan kuin pyörivä JRE. Eikä systeemiin
koidu tarpeetonta kuonan kertymistä.
</p>
</div>
</div>
<div class="outline-3" id="outline-container-sec-1-6">
<h3 id="sec-1-6">Puutteellinen funktionaalisen paradigman tuki</h3>
<div id="text-1-6" class="outline-text-3">
<p>
<a href="http://www.bestinclass.dk/index.clj/2009/10/python-vs-clojure-evolving.html">Lau Jensen</a> on kirjoitellut hyvän introduktion Pythonin ja
Clojuren eräistä eroista ja funktionaalisuuteen painottuen. Tämä
"pointti" on hyvin subjektiivista, koska ihmiset kirjoittavat
isoja ja upeita sovelluksia ilman funktionaalisuuttakin.
</p>

<p>
Toki Pythonissa on teoriassa kaikki eväät funktionaalisen koodin
tuottamiseen, mutta silti pienet asiat tekevät asioista hankalia.
Pythonin peruskirjastossa on vain pieni määrä funktioita listojen
ja iteroitavien käsittelyyn; usein edellämainittuja kahta joutuu
käsittelevään ankkatyypityksestä huolimatta erikseen ohjelmissa.
Clojuren laiskat tietorakenteet käyttäytyvät pinnalla tasan
samoin kuin kokonaan evaluoidut lajitoverinsa.
</p>

<p>
Ankkatyypityksen jälkeen Python on muutenkin ulkoistanut loput
abstraktioajattelunsa OOP:n harteille. Vaikka oliopohjainen
paradigma onkin erinomainen työkalu abstrahointiin, ovat Haskellin
ja Scalan <i>abstraktit tietotyypit</i> ja Clojuren vastaavat
laajennukset protokollineen ja toteutuksineen pidemmällä kuin
mihin OOP nätisti kykenee.
</p>

<p>
Python ei huono kieli puutteellisesta funktionaalisuudestaan
johtuen, vain huonompi kuin Clojure. Ja tämä minun mielipidettäni
tietenkin!
</p>
</div>
</div>
<div class="outline-3" id="outline-container-sec-1-7">
<h3 id="sec-1-7">Python soveltuu nopeaan RAD-tyyppailuun…kö?</h3>
<div id="text-1-7" class="outline-text-3">
<p>
Nopeat käynnistysajat, ajettava pseudokoodi ja runsas kirjasto kaikkea
valmista kuulostaa menestysreseptiltä, kun halutaan tyypitellä jotain
konseptia nopeasti, nopein iteraatioin eteenpäin. Pythonin pitäisi
olla kaikkea tätä, mutta ei minun kokemusten mukaan sitten kuitenkaan.
</p>

<p>
Python sallii kaikessa nopeudessaan huonon koodin kirjoittamisen. Se
on ok, protoillessa saa kirjoittaa mutkat suoraksi. Ja huonoa koodia
syntyykin sitten. Ja itseään tulee vihattua tämän seurauksena.
Lantakasa kasvaa rivi riviltä ja se alkaa aiheuttaa tarpeetonta
märehtimistä näin hidastaen protoilua. Vain vaivoin saadaan projektin
minimaalinen versio kasaan ja ollaan siihen tyytyväisiä, mutta
tyytymättömiä taustalla tehtyihin päätöksiin ja tekniseen velkaan.
Eihän tätä edes kehtaa puskea githubiin, näin surkeata koodia!
</p>

<p>
Clojure paperilla vaikuttaa myös erittäin hyvältä RAD-kieleltä.
Toisaalta kieli ei anna mitenkään vaikutelmaa tästä äkkiseltään, jos
kirjoittaa pythonimaisesti "CLI-rajapinnasta" käsin koodia. Hidas
käynnistyvyys, muistinsyönti, ei niin paljoa valmista palikkaa
saatavilla (etenkin päivämääräkirjastot). Clojure on myös hidasta
sillä tavalla, että huonoa koodia se ei anna tehdä, joten ideoiden
purkaminen koodiksi kestää pythonia pidempään.
</p>

<p>
Mutta kun mennään eteenpäin ajassa, Clojure alkaa ottaa Pythonia
kiinni monista syistä: teknisen velan määrä on pienempi. Koodirivejä
itsessäänkin tulee vähemmän, joten refaktorointi on luontevampaa.
REPL-pohjainen kehittäminen toimii hyvin, vaikka projekti ehtii vähän
kasvattaa kokoaan. Psykologisesti siistinä pysyvä koodi rohkaisee
menemään eteenpäin, eikä jäämään märehtimään huonoja valintoja.
</p>

<p>
Jos Pythonia tietysti saa itsekurin voimalla kirjoitettua suoraan
siistiksi, niin tämä pykälä varmaan mitätöi paljon itse itsestään.
Mutta nämä ovat kokemukseni aiheesta. Edelleenkin aloitan valtaosan
pikkuprojekteistani pythonilla, vaikka tahtoisin kirjoittaa paremmilla
välineillä. Pitäisi nähdä projekti ensimmäistä 50 riviä pidemmälle.
</p>
</div>
</div>
</div>
</div>
  <hr />
  <div id="comments"><div style="padding-top: 2em; padding-bottom:2em;" id="disqus">
  Kommentit, kehitysehdotukset ja keskustelunavaukset ovat
  tervetulleita <a href="mailto:mike@fwwm.us">sähköpostitse</a>.
</div></div>
</div>
      <div id="footer"></div>
    </div>
  </body>

</html>